{% extends '::base.html.twig' %}
{% block body %}
{% if form is defined %}
{{ form_start(form) }}
    {{ form_errors(form) }}
    <div class="row">
        <div class="col-md-6 col-xs-12" style="margin-bottom: 10px;">
            {{ form_widget(form.q) }}
            {{ form_widget(form.submit) }}
        </div>
        <div class="col-md-6 col-xs-12">

            <label class="form-control-static">Filtros</label><span class="separator">|</span>
            <label class="form-control-static">Desde</label>
            {{ form_widget(form.desde) }}<span class="separator">|</span>
            <label class="form-control-static">Hasta</label>
            {{ form_widget(form.hasta) }}<span class="separator">|</span>
            {{ form_widget(form.escuela) }}
        </div>
        {{ form_widget(form._token) }}
    </div>
{{ form_rest(form) }}
{{ form_end(form, {'render_rest': false}) }}
{% endif %} 

    <h5>{{ entities | length }} de {{ pagination.getTotalItemCount }} disponibles</h5>
    
        {% for entity in entities %}
        {% if entity.published or isAdmin or isSAdmin %}
            
        <div class="col-md-9 col-xs-12">
            <div class="well well-sm">
                    <div class="section-box">
                        <h3><a href="{{ path('teg_show', { 'id': entity.id }) }}">{{ entity.titulo }}</a></h3>

                        <p><b>{% for Field in entity.authors %}{{ Field }},{% endfor %}{% for Field in entity.tuthors %}{{ Field }},{% endfor %}</b></br><i>{% for Field in entity.keyWords %}{{ Field }},{% endfor %}</i></p>
                        <hr />
                        <div class="row rating-desc">
                            <div class="col-md-12">
                                <span class="glyphicon glyphicon-schools">{{entity.escuela}}</span><span class="separator">|</span>
                                <span><i class="fa fa-calendar"></i>&nbsp;{{ entity.publicacion|date('m-Y') }}
                                    {% if (isAdmin or isSAdmin) %}
                                        {% if not entity.published %}
                                        <span style="float:right;"><i class="fa fa-eye-slash fa-lg"></i>&nbsp;Oculto</span>
                                        {% else %}
                                        <span style="float:right;"><i class="fa fa-eye fa-lg"></i>&nbsp;Publico</span>
                                        {% endif %}
                                    {% endif %}
                                    
                            </div>
                        </div>
                    </div>
                    
            </div>
        {% endif %}
        </div>
        {% endfor %}
        {# display navigation #}
<div class="navigation">
    {{ knp_pagination_render(pagination) }}
</div>

    {% endblock %}
